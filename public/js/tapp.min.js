const streamer=window.location.pathname.split("/")[2];let toggle_alert=function(e){let t=document.getElementById("alert");var n="loading "+streamer+"'s stream. please wait";if(e){t.innerText=n,t.style.display="block";var r=0;return setInterval(function(){4==++r?(t.innerText=n,r=0):t.innerText+="."},250)}return t.innerText="",t.style.display="none",-1!=alert_interval_id&&clearInterval(alert_interval_id),-1},init_player=function(){var e={width:window.innerWidth,height:window.innerHeight,channel:streamer,parent:["test"]},e=new Twitch.Embed("vid",e);const t=e._player;var n=Date.now();let r=setInterval(function(){var e=t.getPlayerState();if("Playing"===e.playback||"Ready"===e.playback)clearInterval(r),r=null,toggle_alert(!1),document.getElementById("vid").style.display="block",t.setQuality(t.getQualities()[1].group);else if(1e4<Date.now()-n){clearInterval(r),toggle_alert(!1);let e=document.getElementById("alert");e.innerText="player load timeout.\n"+streamer+"is either not live, or an error occurred.\ntry again later, or try another streamer that is live.",e.style.display="block"}},250);return e},alert_interval_id=toggle_alert(!0);const embed=init_player();window.onresize=function(){embed._iframe.width=window.innerWidth,embed._iframe.height=window.innerHeight};